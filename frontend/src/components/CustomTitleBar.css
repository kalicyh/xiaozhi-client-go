/* è‡ªå®šä¹‰æ ‡é¢˜æ æ ·å¼ - åŒ¹é…åº”ç”¨ä¸»é¢˜ */
.custom-titlebar {
  height: 36px;
  /* ä¸èŠå¤©å¤´éƒ¨ç»Ÿä¸€çš„â€œæ·±è‰²åŠé€æ˜ + æ¯›ç»ç’ƒâ€æè´¨ */
  background: linear-gradient(180deg, rgba(15,26,36,.95), rgba(15,26,36,.88));
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid rgba(255,255,255,.06);
  display: flex;
  align-items: center;
  user-select: none;
  position: relative;
  z-index: 1000;
  flex-shrink: 0;
  /* ç»†è…»çš„ä¸‹æŠ•å½±è®©ä¸ä¸‹æ–¹å¤´éƒ¨æ›´èåˆ */
  box-shadow: 0 1px 0 rgba(255,255,255,.04) inset, 0 6px 16px rgba(0,0,0,.28);
  /* æ•´ä¸ªæ ‡é¢˜æ ä¸ºæ‹–æ‹½åŒºåŸŸï¼ˆäº¤äº’å…ƒç´ é™¤å¤–ï¼‰ */
  -webkit-app-region: drag;
}

/* å¯æ‹–æ‹½åŒºåŸŸï¼ˆä¿ç•™å…¼å®¹ï¼‰ */
.custom-titlebar[data-drag] { -webkit-app-region: drag; }

/* æ ‡é¢˜æ å†…å®¹ */
.titlebar-content {
  display: flex;
  align-items: center;
  width: 100%;
  height: 100%;
  padding: 0 10px;
  gap: 8px;
  /* å†…å®¹åŒºåŸŸä¹Ÿå¯æ‹–æ‹½ï¼ˆäº¤äº’å…ƒç´ é™¤å¤–ï¼‰ */
  -webkit-app-region: drag;
}

/* ä»…é™åˆ¶äº¤äº’åŒºåŸŸä¸º no-dragï¼Œé¿å…è¯¯ä¼¤æ•´ä¸ªæ  */
.custom-titlebar .toolbar-actions,
.custom-titlebar .toolbar-actions *,
.custom-titlebar .window-controls,
.custom-titlebar .window-controls *,
.custom-titlebar [data-no-drag] {
  -webkit-app-region: no-drag;
}

/* èŠå¤©ä¿¡æ¯åŒºï¼ˆå·¦å³ç´§é‚»ï¼šæ ‡é¢˜åœ¨å·¦ï¼Œå‰¯æ ‡é¢˜åœ¨å³ï¼‰ */
.chat-info {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 10px;
  min-width: 0;           /* å…è®¸å­é¡¹æ­£ç¡®æ”¶ç¼© */
  max-width: 60%;         /* ä¸å æ»¡æ•´è¡Œï¼Œç•™å‡ºå³ä¾§æŒ‰é’®ç©ºé—´ */
}
.chat-info .title {
  font-weight: 800;
  letter-spacing: .2px;
  color: #fff;
  line-height: 1.1;
  white-space: nowrap;     /* æ ‡é¢˜ä¸æ¢è¡Œ */
  flex: 0 0 auto;
}
.chat-info .subtitle {
  opacity: .85; 
  font-size: 12px; 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  color: #dce7f1;
  min-width: 0;            /* å¼€å¯çœç•¥å·æ‰€éœ€ */
  flex: 1 1 auto;          /* å ç”¨å‰©ä½™ç©ºé—´å¹¶å¯æ”¶ç¼© */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* çŠ¶æ€ç‚¹æ ·å¼ä¿ç•™ */
.chat-info .subtitle.online::before,
.chat-info .subtitle.offline::before {
  content: '';
  display: inline-block;
  width: 8px; height: 8px; border-radius: 50%;
  box-shadow: 0 0 0 2px rgba(255,255,255,.06) inset;
}
.chat-info .subtitle.online::before { background: #2ecc71; }
.chat-info .subtitle.offline::before { background: #e67e22; }

.chat-info .audio-indicator { 
  opacity: 1; 
  font-size: 13px; 
  animation: audioPlaying 1.5s infinite; 
}

@keyframes audioPlaying {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* å·¥å…·ä¸çª—å£æŒ‰é’® */
.toolbar-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto; /* å°†è®¾ç½®æŒ‰é’®ç»„æ¨åˆ°å³ä¾§ */
}

.window-controls {
  display: flex;
  align-items: center;
  gap: 4px;
  /* ç§»é™¤ margin-left:autoï¼Œç”±ä¸Šä¸€ä¸ªç»„è´Ÿè´£æ¨å³ */
  -webkit-app-region: no-drag; /* æŒ‰é’®åŒºåŸŸä¸å¯æ‹–æ‹½ */
}

.control-btn {
  width: 46px;
  height: 36px;
  border: 1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,0.02);
  color: #e9eef3;
  font-size: 10px;
  font-family: 'Segoe UI', sans-serif;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color .15s ease, border-color .15s ease, transform .08s ease;
  position: relative;
  border-radius: 8px;
}

.control-btn:hover {
  background: rgba(255,255,255,.08);
  border-color: rgba(255,255,255,.12);
}

.control-btn:active {
  transform: translateY(1px);
  background: rgba(255,255,255,.12);
}

/* ç‰¹æ®Šæ ·å¼ï¼šå…³é—­æŒ‰é’® */
.close-btn:hover {
  background: #e74c3c;
  color: white;
  border-color: #e74c3c;
}

.close-btn:active {
  background: #c0392b;
  border-color: #c0392b;
}

/* Windowsé£æ ¼çš„å›¾æ ‡ - ä¼˜åŒ–æ˜¾ç¤º */
.minimize-btn {
  font-size: 16px;
  line-height: 1;
}

.minimize-btn::before {
  content: 'â”€';
  font-weight: bold;
}

.maximize-btn {
  font-size: 12px;
  line-height: 1;
}

.maximize-btn::before {
  content: 'ğŸ—–';
}

.maximize-btn.maximized::before {
  content: 'ğŸ——';
}

.close-btn {
  font-size: 14px;
  line-height: 1;
}

.close-btn::before {
  content: 'âœ•';
  font-weight: bold;
}

/* çª„å±æ—¶å›é€€ä¸ºä¸Šä¸‹å¸ƒå±€ï¼Œé¿å…æ‹¥æŒ¤ */
@media (max-width: 600px) {
  .chat-info { 
    flex-direction: column; 
    align-items: flex-start; 
    gap: 2px; 
  }
  .chat-info .subtitle {
    max-width: 100%;
    white-space: normal;
    overflow: visible;
  }
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .custom-titlebar {
    height: 40px;
  }
  
  .control-btn {
    width: 48px;
    height: 40px;
  }
}
